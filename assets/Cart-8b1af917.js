import{_ as q,u as K,S as Y,E as F,r as O,a as k,o as a,c as r,b as _,k as D,d as e,F as R,D as J,y as x,B as M,t as p,q as i,G as I,H as C,p as W,h as Q,J as Z,A as U,e as G,v as z,K as ss,l as X}from"./index-be50f945.js";const $=f=>(W("data-v-27382fd6"),f=f(),Q(),f),es=$(()=>e("span",{class:"font-bold text-2xl text-main-color"}," Xác nhận thanh toán ",-1)),ts={class:"w-full flex flex-column gap-3"},ns={class:"flex flex-column gap-1"},ls=$(()=>e("span",{class:"font-bold"},"Sản phẩm: ",-1)),os={key:0,class:"line-height-2"},as={class:"line-height-2"},cs={key:0,class:"text-700 text-custom-mini line-through"},is={key:1},rs={class:"p-error"},ds={class:"flex justify-content-between"},us=$(()=>e("span",{class:"font-bold"},"Ưu đãi giảm giá:",-1)),_s={key:0,class:"text-main-color"},ps={key:1},hs={class:"flex justify-content-between"},fs=$(()=>e("span",{class:"font-bold"},"Số lượng sản phẩm:",-1)),gs={class:"flex justify-content-between"},vs=$(()=>e("span",{class:"font-bold"},"Tổng số tiền:",-1)),bs={class:"p-error"},ys=$(()=>e("div",{class:"bg-black-alpha-10 p-2 line-height-2"}," Sau khi bạn ấn xác nhận chúng tôi sẽ gửi sản phẩm vào kho của bạn, hãy kiểm tra kho nhé! ",-1)),xs={__name:"PopupPayment",props:["disableButtonPay","payDetail"],setup(f){const n=f,T=K(),{onActionPopupNotification:V,onActionGetUserInfo:A}=Y(),{onActionPaymentCart:g,onActionGetCarts:t}=F(),h=O({display:!1}),S=B=>{g(B).then(async d=>{var y;d.success&&(h.display=!1,await A(),await t((y=n==null?void 0:n.payDetail)==null?void 0:y.user_id),T.push({name:"Home"}),V({display:!0,title:"Thanh toán thành công",content1:"Bạn đã thanh toán thành công đơn hàng của mình, vui lòng kiểm tra kho hàng để trải nghiệm sản phẩm.",content2:"Tiếp tục mua hàng",action:"Products"}))})};return(B,d)=>{const y=k("Button"),m=k("Dialog");return a(),r(R,null,[_(y,{onClick:d[0]||(d[0]=c=>h.display=!0),disabled:n==null?void 0:n.disableButtonPay,class:"btn",label:"Thanh toán"},null,8,["disabled"]),_(m,{visible:h.display,"onUpdate:visible":d[3]||(d[3]=c=>h.display=c),modal:"",class:"w-30rem"},{header:D(()=>[es]),footer:D(()=>[_(y,{onClick:d[1]||(d[1]=c=>h.display=!1),label:"Bỏ qua",class:"p-button-outlined"}),_(y,{onClick:d[2]||(d[2]=c=>{var o,u;S({user_id:`${(o=n==null?void 0:n.payDetail)==null?void 0:o.user_id}`,products:n==null?void 0:n.payDetail.productsPay.map(l=>({product_id:`${l==null?void 0:l.product_id}`,price:`${l==null?void 0:l.price}`})),total_money:(u=n==null?void 0:n.payDetail)==null?void 0:u.totalMoney})}),label:"Xác nhận"})]),default:D(()=>{var c,o,u;return[e("div",ts,[e("div",ns,[ls,(a(!0),r(R,null,J((c=n==null?void 0:n.payDetail)==null?void 0:c.productsPay,(l,v)=>{var j;return a(),r("div",{key:v},[((j=n==null?void 0:n.payDetail)==null?void 0:j.productsPay.length)>1?(a(),r("span",os,"- ")):x("",!0),e("span",as,[M(p(l==null?void 0:l.name)+" ( ",1),i(I)()?(a(),r("span",cs,p(i(C)(l==null?void 0:l.originalPrice)),1)):x("",!0),i(I)()?(a(),r("span",is," - ")):x("",!0),e("span",rs,p(i(C)(l==null?void 0:l.price)),1),M(" ) ")])])}),128))]),e("div",ds,[us,i(I)()?(a(),r("span",_s," ("+p(`Có vip giảm ${i(I)()}% cho mỗi đơn hàng`)+") ",1)):(a(),r("span",ps,"Không có vip"))]),e("div",hs,[fs,e("span",null,"x"+p((o=n==null?void 0:n.payDetail)==null?void 0:o.amount),1)]),e("div",gs,[vs,e("span",bs,p(i(C)((u=n==null?void 0:n.payDetail)==null?void 0:u.totalMoney)),1)]),ys])]}),_:1},8,["visible"])],64)}}},Cs=q(xs,[["__scopeId","data-v-27382fd6"]]);const b=f=>(W("data-v-36664fe7"),f=f(),Q(),f),ks={class:"container body flex flex-column gap-3"},$s={class:"mt-3 flex flex-column gap-3"},ms=b(()=>e("label",{class:"text-custom-1 font-bold"},"Giỏ hàng",-1)),ws={class:"flex card flex-column gap-3 bg-main-left p-3"},Ps={key:0,class:"flex align-items-center justify-content-between"},Ds={class:"w-full p-3 bg-white border-round-lg flex align-items-center justify-content-between"},Vs={class:"flex align-items-center gap-2"},As=b(()=>e("span",{class:"text-main-color on-click"}," Chọn tất cả ",-1)),Ss={key:1,class:"flex flex-column gap-3"},Bs={class:"header w-full flex card p-2 pr-3"},js={class:"col-4 flex align-items-center gap-3"},Is={class:"font-bold"},Rs={class:"flex align-items-center gap-2"},Ts=b(()=>e("span",null,"Chọn tất cả",-1)),Us={class:"col-8 p-0 flex align-items-center"},Gs=b(()=>e("div",{class:"col-4 p-0 font-bold pl-5"},"Đơn giá",-1)),zs=b(()=>e("div",{class:"col-3 p-0 font-bold"},"Vip",-1)),Ns=b(()=>e("div",{class:"col-3 p-0 font-bold"},"Số tiền",-1)),Es={class:"col-2 p-0 text-right"},Hs={class:"relative flex flex-column gap-3"},Ls={key:0,style:{"min-height":"20rem"},class:"card flex align-items-center justify-content-center"},Ms={class:"cart-item col-4 px-0 flex gap-2 flex align-items-center"},Xs=["src"],qs={class:"h-full"},Ks={class:"flex flex-column gap-2"},Fs=["onClick"],Os=b(()=>e("i",{style:{"font-size":"0.8rem"},class:"pi pi-star-fill text-main-color"},null,-1)),Js=b(()=>e("i",{style:{"font-size":"0.8rem"},class:"pi pi-star text-main-color"},null,-1)),Ws={class:"cart-info col-8 p-0 flex align-items-center"},Qs={class:"item col-4 p-0 pl-5"},Ys={class:"flex align-items-end gap-2 flex-wrap"},Zs={key:0,class:"line-through text-custom-mini text-600"},se={class:"p-error"},ee={class:"item col-3 p-0"},te={class:"item col-3 p-0"},ne={class:"p-error"},le={class:"item col-2 p-0 text-right"},oe={key:2,class:"pay card gap-3 p-3 flex align-items-center justify-content-between"},ae={class:"btn justify-content-between flex align-items-center gap-3"},ce=b(()=>e("span",{class:"font-bold"},"Tổng cộng",-1)),ie={class:"font-bold p-error"},re={__name:"Cart",setup(f){const n=Z(),T=K(),{onActionGetCarts:V,onActionRemoveCart:A,onGetterCarts:g}=F(),t=O({selectCarts:[],selectAllCarts:[],sizeScreen:window.innerWidth}),h=()=>t.sizeScreen<750,S=()=>{t.selectAllCarts.includes("all")?t.selectCarts=g.value:t.selectCarts=[]},B=()=>{var c;t.selectCarts.length===((c=g.value)==null?void 0:c.length)?t.selectAllCarts=["all"]:t.selectAllCarts=[]},d=()=>t.selectCarts.reduce((c,{money_number:o})=>c+o,0),y=c=>{T.push({name:"ProductDetail",params:{id:c}})},m=(c,o)=>{n.require({message:"Bạn có chắc xóa sản phẩm khỏi giỏ hàng?",header:"Xác nhận",icon:"pi pi-info-circle",acceptLabel:"Đồng ý",acceptClass:"p-button-danger",rejectLabel:"Hủy bỏ",rejectClass:"p-button-outlined",accept:()=>{switch(c){case"item":A(o).then(u=>{var l,v;u.success&&(V((v=(l=U.value)==null?void 0:l.user_info)==null?void 0:v.user_id),t.selectCarts=[],t.selectAllCarts=[])});break;case"items":A(o).then(u=>{var l,v;u.success&&(V((v=(l=U.value)==null?void 0:l.user_info)==null?void 0:v.user_id),t.selectCarts=[],t.selectAllCarts=[])});break}},reject:()=>{}})};return(c,o)=>{var N,E,H,L;const u=k("Checkbox"),l=k("Button"),v=k("Rating"),j=k("ConfirmDialog");return a(),r(R,null,[e("div",ks,[e("div",$s,[ms,e("div",ws,[h()&&i(g)[0]?(a(),r("div",Ps,[e("div",Ds,[e("div",Vs,[_(u,{onChange:S,modelValue:t.selectAllCarts,"onUpdate:modelValue":o[0]||(o[0]=s=>t.selectAllCarts=s),value:"all"},null,8,["modelValue"]),As]),_(l,{icon:"pi pi-trash",class:"p-button-rounded p-button-outlined p-button-danger p-button-text",disabled:((N=t==null?void 0:t.selectCarts)==null?void 0:N.length)<2,onClick:o[1]||(o[1]=s=>m("items",t==null?void 0:t.selectCarts.map(({cart_id:w})=>w)))},null,8,["disabled"])])])):x("",!0),!h()&&i(g)[0]?(a(),r("div",Ss,[e("div",Bs,[e("div",js,[e("div",Is,[e("div",Rs,[_(u,{onChange:S,modelValue:t.selectAllCarts,"onUpdate:modelValue":o[2]||(o[2]=s=>t.selectAllCarts=s),value:"all"},null,8,["modelValue"]),Ts])])]),e("div",Us,[Gs,zs,Ns,e("div",Es,[_(l,{icon:"pi pi-trash",class:"p-button-rounded p-button-outlined p-button-danger p-button-text",disabled:((E=t==null?void 0:t.selectCarts)==null?void 0:E.length)<2,onClick:o[3]||(o[3]=s=>m("items",t==null?void 0:t.selectCarts.map(({cart_id:w})=>w)))},null,8,["disabled"])])])])])):x("",!0),e("div",Hs,[i(g)[0]?x("",!0):(a(),r("div",Ls," Giỏ hàng của bạn trống. ")),(a(!0),r(R,null,J(i(g),(s,w)=>(a(),r("div",{key:w,class:"w-full flex card cart-container relative"},[e("div",Ms,[_(u,{onChange:B,modelValue:t.selectCarts,"onUpdate:modelValue":o[4]||(o[4]=P=>t.selectCarts=P),value:s},null,8,["modelValue","value"]),e("img",{class:"w-5rem h-5rem object-fit-cover",src:s==null?void 0:s.image,alt:"Lỗi ảnh",onerror:"this.onerror=null; this.src='../../../public/images/image-product-default.svg';"},null,8,Xs),e("div",qs,[e("div",Ks,[e("span",{class:"w-full font-bold line-height-2 fixed-text on-click-1",onClick:P=>y(s==null?void 0:s.product_id)},p(s==null?void 0:s.name),9,Fs),_(v,{modelValue:s.rating,"onUpdate:modelValue":P=>s.rating=P,readonly:"",cancel:!1},{onicon:D(()=>[Os]),officon:D(()=>[Js]),_:2},1032,["modelValue","onUpdate:modelValue"])])])]),e("div",Ws,[e("div",Qs,[G(e("span",null,"Đơn giá: ",512),[[z,h()]]),e("div",Ys,[s!=null&&s.price_sale?(a(),r("span",Zs,p(i(C)(s==null?void 0:s.price)),1)):x("",!0),e("span",se,p(i(C)(s!=null&&s.price_sale?s==null?void 0:s.price_sale:s==null?void 0:s.price)),1)])]),e("div",ee,[G(e("span",null,"VIP:",512),[[z,h()]]),e("span",{class:ss([{"bg-main-color text-white px-2 py-1":s.vip!=="Không vip"},"text-custom-mini border-round-2xl"])},p(s.vip),3)]),e("div",te,[G(e("span",null,"Số tiền:",512),[[z,h()]]),e("span",ne,p(i(C)(s==null?void 0:s.money_number)),1)]),e("div",le,[t.sizeScreen>750?(a(),X(l,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-outlined p-button-danger p-button-text",onClick:P=>m("item",[s==null?void 0:s.cart_id])},null,8,["onClick"])):(a(),X(l,{key:1,label:"Xóa",class:"p-button-danger w-full"}))])])]))),128))]),i(g)[0]?(a(),r("div",oe,[e("div",ae,[ce,e("span",ie,p(i(C)(d())),1)]),_(Cs,{disableButtonPay:((H=t==null?void 0:t.selectCarts)==null?void 0:H.length)===0,payDetail:{user_id:(L=i(U).user_info)==null?void 0:L.user_id,productsPay:t.selectCarts.map(s=>({product_id:s==null?void 0:s.product_id,name:s==null?void 0:s.name,originalPrice:s!=null&&s.price_sale?s==null?void 0:s.price_sale:s==null?void 0:s.price,price:s==null?void 0:s.money_number})),amount:t.selectCarts.length,totalMoney:d()}},null,8,["disableButtonPay","payDetail"])])):x("",!0)])])]),_(j,{class:"line-height-3"})],64)}}},ue=q(re,[["__scopeId","data-v-36664fe7"]]);export{ue as default};
