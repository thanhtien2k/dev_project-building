import{s as gt,S as ft,m as xt,z as Ct,A as lt,r as ct,x as Dt,n as yt,a as $,o as a,c as l,d as t,B as nt,t as u,q as e,b as h,k as x,C as mt,y as T,e as bt,v as St,F as at,D as it,l as It,_ as kt,u as Tt,E as $t,G as C,H as et,p as Pt,h as wt,I as Bt}from"./index-be50f945.js";const Et="/assets/image-product-default-eb8ce0bc.svg",Vt="/assets/video-icon-73b85c35.png",jt={class:"flex flex-column gap-3"},At=t("label",{class:"font-bold text-custom-1"},"Đánh giá của khách hàng",-1),Ut={class:"flex gap-3 align-items-center"},Gt={class:"flex align-items-center gap-1 text-custom-1"},Ht=t("i",{class:"pi pi-star-fill text-2xl pb-1 text-main-color"},null,-1),Lt=t("span",null,"|",-1),Mt={key:0},Rt={key:1},Nt={class:"flex flex-column gap-3"},zt={key:0,class:"flex flex-column gap-2 bg-main-right p-3 border-round-lg"},qt={class:"text-custom-mini"},Ot={key:0},Wt=t("i",{style:{"font-size":"0.9rem"},class:"pi pi-star-fill text-main-color"},null,-1),Ft=t("i",{style:{"font-size":"0.9rem"},class:"pi pi-star text-main-color"},null,-1),Xt={class:"text-center"},Kt={class:"flex justify-content-between"},Jt={key:0,class:"text-custom-mini"},Qt=t("i",{style:{"font-size":"0.8rem"},class:"pi pi-star-fill text-main-color"},null,-1),Yt=t("i",{style:{"font-size":"0.8rem"},class:"pi pi-star text-main-color"},null,-1),Zt=["innerHTML"],te={__name:"Evaluate",props:["value"],emits:["onEmitUpdateProductDetail"],setup(y,{emit:o}){var k;const n=y,s=gt(),{onGetterUserInfo:D}=ft(),{onActionSendEvaluate:V}=xt(),{onActionGetWarehouses:j,onGetterWarehouses:A}=Ct(),_=(k=lt.value)==null?void 0:k.user_info,d=ct({id:s.params.id,amountStart:0,content:null,isCheckEvaluate:!1}),b=()=>A.value.some(({product_id:v})=>+v==+d.id),r=()=>d.isCheckEvaluate,g=()=>b()&&r(),w=async()=>{(await V({user_id:_==null?void 0:_.user_id,product_id:s.params.id,start_amount:b()?r()?d.amountStart:-1:0,content:d.content})).success&&(d.amountStart=0,d.content=null,o("onEmitUpdateProductDetail",{noLoading:!0}))};return Dt(()=>n.value,v=>{const p=v.evaluate.filter(({user_id:m})=>m===(_==null?void 0:_.user_id));d.isCheckEvaluate=p.length>0?!p.some(({start_key:m})=>[1,2,3,4,5].includes(m)):!0}),yt(()=>{j({user_id:_==null?void 0:_.user_id})}),(v,p)=>{var U,G,H,L,M,R,N,z,q,O,W,F,X,K,J;const m=$("Rating"),i=$("Avatar"),B=$("Textarea"),S=$("Button");return a(),l("div",jt,[At,t("div",Ut,[t("span",Gt,[Ht,nt(" "+u(`${(U=n==null?void 0:n.value)==null?void 0:U.total_evaluate}`.split(".")[1]==="0"?(G=n==null?void 0:n.value)==null?void 0:G.total_evaluate.split(".")[0]:(H=n==null?void 0:n.value)==null?void 0:H.total_evaluate),1)]),Lt,(L=n==null?void 0:n.value)!=null&&L.amount_evaluate?(a(),l("span",Mt,u(`Đã có ${(M=n==null?void 0:n.value)==null?void 0:M.amount_evaluate} đánh giá`),1)):(a(),l("span",Rt,"Chưa có đánh giá nào"))]),t("div",Nt,[(N=(R=e(D))==null?void 0:R.user_info)!=null&&N.full_name?(a(),l("div",zt,[h(i,{value:{image:(q=(z=e(D))==null?void 0:z.user_info)==null?void 0:q.image,name:(W=(O=e(D))==null?void 0:O.user_info)==null?void 0:W.full_name}},{default:x(()=>[t("div",qt,u(e(mt)(new Date)),1),g()?(a(),l("div",Ot,[h(m,{modelValue:d.amountStart,"onUpdate:modelValue":p[0]||(p[0]=c=>d.amountStart=c),cancel:!1},{onicon:x(()=>[Wt]),officon:x(()=>[Ft]),_:1},8,["modelValue"])])):T("",!0)]),_:1},8,["value"]),h(B,{modelValue:d.content,"onUpdate:modelValue":p[1]||(p[1]=c=>d.content=c),autoResize:"",rows:"3",maxlength:"1000",class:"textarea",placeholder:"Nhập đánh giá",disabled:g()&&!d.amountStart},null,8,["modelValue","disabled"]),h(S,{onClick:w,label:"Gửi đánh giá",disabled:!((F=d.content)!=null&&F.trim())},null,8,["disabled"])])):T("",!0),bt(t("div",Xt," Chưa có đánh giá nào. ",512),[[St,!((K=(X=n==null?void 0:n.value)==null?void 0:X.evaluate)!=null&&K.length)>0]]),(a(!0),l(at,null,it((J=n==null?void 0:n.value)==null?void 0:J.evaluate,(c,st)=>(a(),l("div",{key:st,class:"flex flex-column gap-2 bg-main-right p-3 border-round-lg"},[t("div",Kt,[h(i,{value:{image:c==null?void 0:c.image,name:c==null?void 0:c.full_name}},{default:x(()=>[c.start_key===0||c.start_key===-1?(a(),l("div",Jt,u(c.start_amount),1)):(a(),It(m,{key:1,modelValue:c.start_amount,"onUpdate:modelValue":ot=>c.start_amount=ot,readonly:"",cancel:!1},{onicon:x(()=>[Qt]),officon:x(()=>[Yt]),_:2},1032,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["value"]),t("div",null,u(e(mt)(c==null?void 0:c.created_at)),1)]),t("div",{innerHTML:c==null?void 0:c.content},null,8,Zt)]))),128))])])}}};const E=y=>(Pt("data-v-6116404d"),y=y(),wt(),y),ee=E(()=>t("span",{class:"font-bold text-2xl text-main-color"},"Xác nhận thanh toán",-1)),se={class:"w-full flex flex-column gap-3"},oe={class:"flex flex-column gap-1"},ne=E(()=>t("span",{class:"font-bold"},"Sản phẩm: ",-1)),ae={key:0,class:"line-height-2"},le={class:"line-height-2"},ce={key:0,class:"text-700 text-custom-mini line-through"},ie={key:1},de={class:"p-error"},re={class:"flex justify-content-between"},ue=E(()=>t("span",{class:"font-bold"},"Ưu đãi giảm giá:",-1)),_e={key:0,class:"text-main-color"},pe={key:1},he={class:"flex justify-content-between"},ve=E(()=>t("span",{class:"font-bold"},"Số lượng sản phẩm:",-1)),me={class:"flex justify-content-between"},ge=E(()=>t("span",{class:"font-bold"},"Tổng số tiền:",-1)),fe={class:"p-error"},xe=E(()=>t("div",{class:"bg-black-alpha-10 p-2 line-height-2"}," Sau khi bạn ấn xác nhận chúng tôi sẽ gửi sản phẩm vào kho của bạn, hãy kiểm tra kho nhé! ",-1)),ye={__name:"PopupPayment",props:["payDetail"],setup(y){const o=y,n=Tt(),{onActionPopupNotification:s,onActionGetUserInfo:D,onGetterUserInfo:V}=ft(),{onActionPaymentCart:j,onActionGetCarts:A}=$t(),_=ct({display:!1}),d=b=>{j(b).then(async r=>{var g;r.success&&(_.display=!1,await D(),await A((g=o==null?void 0:o.payDetail)==null?void 0:g.user_id),n.push({name:"Home"}),s({display:!0,title:"Thanh toán thành công",content1:"Bạn đã thanh toán thành công đơn hàng của mình, vui lòng kiểm tra kho hàng để trải nghiệm sản phẩm.",content2:"Tiếp tục mua hàng",action:"Products"}))})};return(b,r)=>{var k;const g=$("Button"),w=$("Dialog");return a(),l(at,null,[h(g,{onClick:r[0]||(r[0]=v=>_.display=!0),class:"btn-item p-button-danger",label:"Thanh toán ngay",disabled:!((k=e(V))!=null&&k.account_id)},null,8,["disabled"]),h(w,{visible:_.display,"onUpdate:visible":r[3]||(r[3]=v=>_.display=v),modal:"",class:"w-30rem"},{header:x(()=>[ee]),footer:x(()=>[h(g,{onClick:r[1]||(r[1]=v=>_.display=!1),label:"Bỏ qua",class:"p-button-outlined"}),h(g,{onClick:r[2]||(r[2]=v=>{var p,m;d({user_id:`${(p=o==null?void 0:o.payDetail)==null?void 0:p.user_id}`,products:o==null?void 0:o.payDetail.productsPay.map(i=>({product_id:`${i==null?void 0:i.product_id}`,price:`${i==null?void 0:i.price}`})),total_money:(m=o==null?void 0:o.payDetail)==null?void 0:m.totalMoney})}),label:"Xác nhận"})]),default:x(()=>{var v,p,m;return[t("div",se,[t("div",oe,[ne,(a(!0),l(at,null,it((v=o==null?void 0:o.payDetail)==null?void 0:v.productsPay,(i,B)=>{var S;return a(),l("div",{key:B},[((S=o==null?void 0:o.payDetail)==null?void 0:S.productsPay.length)>1?(a(),l("span",ae,"- ")):T("",!0),t("span",le,[nt(u(i==null?void 0:i.name)+" ( ",1),e(C)()?(a(),l("span",ce,u(e(et)(i==null?void 0:i.originalPrice)),1)):T("",!0),e(C)()?(a(),l("span",ie," - ")):T("",!0),t("span",de,u(e(et)(i==null?void 0:i.price)),1),nt(" ) ")])])}),128))]),t("div",re,[ue,e(C)()?(a(),l("span",_e," ("+u(`Có vip giảm ${e(C)()}% cho mỗi đơn hàng`)+") ",1)):(a(),l("span",pe,"Không có vip"))]),t("div",he,[ve,t("span",null,"x"+u((p=o==null?void 0:o.payDetail)==null?void 0:p.amount),1)]),t("div",me,[ge,t("span",fe,u(e(et)((m=o==null?void 0:o.payDetail)==null?void 0:m.totalMoney)),1)]),xe])]}),_:1},8,["visible"])],64)}}},be=kt(ye,[["__scopeId","data-v-6116404d"]]);const P=y=>(Pt("data-v-adf1df8b"),y=y(),wt(),y),ke={class:"container body flex flex-column gap-3"},$e={class:"mt-3 card flex flex-column gap-3"},Pe=P(()=>t("label",{class:"text-custom-1 font-bold"},"Chi tiết sản phẩm",-1)),we={class:"body-detail flex"},Ce={class:"col-left col-5 p-0 flex flex-column gap-3"},De=["src"],Se={class:"files flex gap-2 h-5rem"},Ie={key:0,class:"relative flex-1 overflow-hidden h-5rem text-center border-1 text-300"},Te=["src"],Be={class:"absolute top-0 left-0 right-0 bottom-0 opacity-0"},Ee={key:1,class:"flex-1 object-fit-cover h-full border-1 text-300",src:Et,alt:"Lỗi ảnh"},Ve={class:"video-container flex"},je=P(()=>t("span",{style:{display:"none"},class:"title-video w-full text-main-color bg-black-alpha-10 py-2"}," Click vào đây để xem video demo ",-1)),Ae=P(()=>t("span",null,"Video demo",-1)),Ue=P(()=>t("img",{class:"video w-full h-5rem",src:Vt,alt:"Lỗi video"},null,-1)),Ge={class:"px-3"},He={key:0,class:"w-full h-30rem",controls:""},Le=["src"],Me={key:1,class:"bg-white p-3 border-round-3xl"},Re={class:"col-right col-7 p-3 flex flex-column gap-3"},Ne={class:"title text-2xl text-main-color line-height-2"},ze={class:"flex gap-3 text-700"},qe={class:"flex gap-1"},Oe=P(()=>t("i",{class:"pi pi-star-fill text-main-color"},null,-1)),We=P(()=>t("span",null,"|",-1)),Fe=P(()=>t("span",null,"|",-1)),Xe={class:"flex gap-3 bg-black-alpha-10 p-3"},Ke={key:0,class:"line-through text-800"},Je={class:"flex flex-column gap-2"},Qe={class:"flex align-items-center gap-3"},Ye={class:"text-2xl font-bold p-error"},Ze={key:0,style:{"padding-top":"0.3rem !important"},class:"bg-main-color p-1 px-2 text-white text-custom-mini border-round-2xl"},ts={class:"text-main-color font-bold flex align-items-center gap-1"},es=P(()=>t("span",{class:"on-click"},"Đăng ký gói vip",-1)),ss=P(()=>t("i",{class:"pi pi-question-circle"},null,-1)),os=[ss],ns={class:"btn-action flex gap-3"},as={class:"border-top-1 text-300 pt-3 mt-2 flex flex-column gap-1"},ls=P(()=>t("span",{class:"font-bold text-800"},"Mô tả sản phẩm",-1)),cs=["innerHTML"],is={__name:"ProductDetail",setup(y){const o=gt(),{onActionGetProductDetail:n,onGetterProductDetail:s}=xt(),{onActionGetCarts:D,onActionAddItemCart:V}=$t(),j=d=>{n(o.params.id,d)},A=d=>{var g,w;const{user_id:b,vip:r}=(w=(g=lt)==null?void 0:g.value)==null?void 0:w.user_info;V({user_id:b,product_id:d,vip:r}).then(k=>{k.success&&D(b,{noLoading:!0})}).catch(k=>{console.log(k)})};yt(()=>{n(o.params.id)});const _=ct([{image:"https://anime.atsit.in/l/wp-content/uploads/2022/09/khi-nao-goku-len-super-saiyan-blue.jpg",title:"Project php bán hàng bằng PHP",price:5e5,sold:200},{image:"https://i.ex-cdn.com/mgn.vn/files/content/2021/11/03/toc-goku_1-2117.jpg",title:"Project php bán hàng bằng PHP",price:5e5,sold:200},{image:"https://genk.mediacdn.vn/2019/4/2/photo-1-15541780148131777189878.jpg",title:"Project php bán hàng bằng PHP",price:5e5,sold:200},{image:"https://genk.mediacdn.vn/2017/photo-12-1510731176941.jpg",title:"Project php bán hàng bằng PHP",price:5e5,sold:200}]);return(d,b)=>{var p,m,i,B,S,U,G,H,L,M,R,N,z,q,O,W,F,X,K,J,c,st,ot,dt,rt,ut,_t;const r=$("Image"),g=$("Button"),w=$("CardProducts"),k=$("CardBody"),v=Bt("tooltip");return a(),l("div",ke,[t("div",$e,[Pe,t("div",we,[t("div",Ce,[t("img",{style:{"object-fit":"contain"},class:"w-full h-15rem card",src:(p=e(s))==null?void 0:p.image,onerror:"this.onerror=null; this.src='../../../public/images/image-product-default.svg';"},null,8,De),t("div",Se,[(a(!0),l(at,null,it((i=(m=e(s))==null?void 0:m.files)==null?void 0:i.images,(f,I)=>(a(),l("div",{key:I,style:{"min-width":"4rem"},class:"flex-1"},[f?(a(),l("div",Ie,[t("img",{class:"flex-1 object-fit-cover h-full",src:f,alt:"Lỗi ảnh"},null,8,Te),t("div",Be,[h(r,{src:f,alt:"Image",class:"w-full h-full",preview:""},null,8,["src"])])])):(a(),l("img",Ee))]))),128)),t("div",Ve,[je,h(r,{alt:"Image",class:"video-preview w-full text-center",preview:""},{indicatoricon:x(()=>[Ae]),image:x(()=>[Ue]),preview:x(()=>{var f,I,Q,Y,Z,tt;return[t("div",Ge,[(Q=(I=(f=e(s))==null?void 0:f.files)==null?void 0:I.video)!=null&&Q.base64?(a(),l("video",He,[t("source",{src:(tt=(Z=(Y=e(s))==null?void 0:Y.files)==null?void 0:Z.video)==null?void 0:tt.base64,type:"video/mp4"},null,8,Le)])):(a(),l("span",Me," Chưa có video demo "))])]}),_:1})])])]),t("div",Re,[t("span",Ne,u((B=e(s))==null?void 0:B.name),1),t("div",ze,[t("span",qe,[Oe,nt(" "+u(`${(S=e(s))==null?void 0:S.total_evaluate}`.split(".")[1]==="0"?(U=e(s))==null?void 0:U.total_evaluate.split(".")[0]:(G=e(s))==null?void 0:G.total_evaluate),1)]),We,t("span",null,u((H=e(s))==null?void 0:H.amount_evaluate)+" đánh giá",1),Fe,t("span",null,u((L=e(s))==null?void 0:L.sold)+" đã bán",1)]),t("div",Xe,[(M=e(s))!=null&&M.price_sale?(a(),l("span",Ke,u(e(et)((R=e(s))==null?void 0:R.price)),1)):T("",!0),t("div",Je,[t("div",Qe,[t("span",Ye,u(e(et)((N=e(s))!=null&&N.price_sale?(z=e(s))==null?void 0:z.price_sale:(q=e(s))==null?void 0:q.price)),1),(O=e(s))!=null&&O.sale?(a(),l("span",Ze,u((W=e(s))==null?void 0:W.sale),1)):T("",!0)]),t("div",ts,[es,bt((a(),l("div",null,os)),[[v,"Đăng ký gói vip để nhận được nhiều ưu đãi.",void 0,{top:!0}]])])])]),t("div",ns,[h(g,{onClick:b[0]||(b[0]=f=>A(e(s).product_id)),class:"btn-item",label:"Thêm vào giỏ hàng"}),h(be,{payDetail:{user_id:`${(X=(F=e(lt))==null?void 0:F.user_info)==null?void 0:X.user_id}`,productsPay:[{...e(s)}].map(f=>{var I,Q,Y,Z,tt,pt,ht,vt;return{product_id:`${f==null?void 0:f.product_id}`,name:f==null?void 0:f.name,originalPrice:(I=e(s))!=null&&I.price_sale?(Q=e(s))==null?void 0:Q.price_sale:(Y=e(s))==null?void 0:Y.price,price:`${(Z=e(s))!=null&&Z.price_sale?((tt=e(s))==null?void 0:tt.price_sale)-((pt=e(s))==null?void 0:pt.price_sale)*e(C)()/100:((ht=e(s))==null?void 0:ht.price)-((vt=e(s))==null?void 0:vt.price)*e(C)()/100}`}}),amount:1,totalMoney:(K=e(s))!=null&&K.price_sale?((J=e(s))==null?void 0:J.price_sale)-((c=e(s))==null?void 0:c.price_sale)*e(C)()/100:((st=e(s))==null?void 0:st.price)-((ot=e(s))==null?void 0:ot.price)*e(C)()/100}},null,8,["payDetail"])])])]),t("div",as,[ls,t("div",{innerHTML:(dt=e(s))==null?void 0:dt.description,class:"line-height-3 text-800"},null,8,cs)])]),h(k,{label:"Sản phẩm liên quan"},{default:x(()=>[h(w,{value:_},null,8,["value"])]),_:1}),h(te,{value:{total_evaluate:(rt=e(s))==null?void 0:rt.total_evaluate,evaluate:((ut=e(s))==null?void 0:ut.evaluate)||[],amount_evaluate:(_t=e(s))==null?void 0:_t.amount_evaluate},onOnEmitUpdateProductDetail:j},null,8,["value"])])}}},rs=kt(is,[["__scopeId","data-v-adf1df8b"]]);export{rs as default};
