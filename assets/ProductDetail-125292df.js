import{a as $,o as m,c as f,b as u,$ as H,a0 as C,O as K,e as x,v as S,d as t,t as P,K as k,q as i,a1 as Z,y as V,a2 as D,I as W,k as O,a3 as B,u as N,s as F,J as X,Z as L,r as U,R,T as A,a4 as M,x as I,F as G,n as Q,D as Y,l as j}from"./index-be50f945.js";const ee={class:"flex gap-2"},J={__name:"DoubleButton",emits:["onSave","onSkip"],setup(b,{emit:c}){return(e,s)=>{const a=$("Button");return m(),f("div",ee,[u(a,{label:"Lưu",onClick:s[0]||(s[0]=p=>c("onSave"))}),H(e.$slots,"default"),u(a,{label:"Bỏ qua",class:"p-button-outlined",onClick:s[1]||(s[1]=p=>c("onSkip"))})])}}},te={class:"flex flex-column gap-2"},se={class:"p-error"},ne={class:"flex flex-column gap-1"},le={key:0,class:"pi pi-plus"},ae={key:1,class:"flex flex-column gap-1 align-items-center"},oe=t("i",{class:"pi pi-camera text-2xl"},null,-1),re=["accept","onDrop"],ie={class:"flex flex-column gap-1"},ce=t("span",null,"Đang tải...",-1),de=["src"],ue={key:1,class:"w-full h-full",controls:""},pe=["src"],me={key:2,class:"w-full h-full flex align-items-center justify-content-center"},fe={class:"flex flex-column"},ge=t("img",{class:"w-10rem h-10rem object-fit-cover",src:"https://cdn1.iconfinder.com/data/icons/fs-icons-ubuntu-by-franksouza-/512/application-x-rar.png",alt:"Lỗi ảnh"},null,-1),_e={class:"p-error"},w={__name:"ImageValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},class:{type:String,required:!1,default:"w-12rem h-12rem"},style:{type:Object,required:!1,default:()=>{}},miniSize:{type:Boolean,required:!1,default:!1},imageProps:{type:Object,required:!1,default:()=>({maxSize:3,required:!0,disabled:!1,accept:"image/*",type:"JPG,JPEG,PNG"})}},emits:["onRemove"],setup(b,{emit:c}){const e=b,{value:s,errorMessage:a,setErrors:p,setValue:y}=C(e.name),h=K(!1),d=l=>{const n=l/1048576;return Number(n%1===0?n.toFixed(0):n.toFixed(2))},o=l=>{var n,q;if(d(l.target.files[0].size)>Number((n=e==null?void 0:e.imageProps)==null?void 0:n.maxSize))return p(`Dung lượng tệp không được vượt quá ${(q=e==null?void 0:e.imageProps)==null?void 0:q.maxSize}MB`),!0;if(!e.imageProps.type.toLowerCase().split(",").includes(l.target.files[0].name.split(".")[l.target.files[0].name.split(".").length-1].toLowerCase()))return p("Tệp không đúng định dạng"),!0},r=async l=>{if(o(l))return;h.value=!0;const n=new FileReader;n.readAsDataURL(l.target.files[0]),n.onload=q=>{q.target.result&&y({name:l.target.files[0].name,base64:q.target.result}),h.value=!1}},g=async l=>{const n={target:{files:[l.dataTransfer.files[0]]}};l.preventDefault(),r(n)},v=l=>{switch(l){case"image/*":return"ảnh";case"video/*":return"video";default:return"file"}},_=l=>{y(null),c("onRemove",l)};return(l,n)=>{var T;const q=$("ProgressSpinner");return m(),f("div",te,[x(t("label",null,[t("span",null,P(e.label),1),x(t("span",se,"*",512),[[S,e.imageProps.required]])],512),[[S,e.label]]),t("div",ne,[t("div",{class:k([{"p-disabled":e.imageProps.disabled},"border-1 border-dashed text-main-color border-round-lg overflow-hidden"])},[!i(s)&&!h.value?(m(),f("div",{key:0,class:k([e.class,"relative flex align-items-center justify-content-center"])},[e.miniSize?(m(),f("i",le)):(m(),f("div",ae,[oe,t("span",null,P(`Thêm ${v(e.imageProps.accept)}`),1)])),t("input",{type:"file",class:"absolute top-0 right-0 left-0 bottom-0 opacity-0 on-click",accept:e.imageProps.accept,onDrop:Z(g,["prevent"]),onChange:r},null,40,re)],2)):V("",!0),h.value&&!i(s)?(m(),f("div",{key:1,class:k([e.class,"relative flex justify-content-center align-items-center"])},[t("div",ie,[u(q,{style:{width:"40px",height:"40px"},strokeWidth:"3",animationDuration:".5s"}),ce])],2)):V("",!0),i(s)&&!h.value?(m(),f("div",{key:2,class:k([e.class,"relative"]),style:D(e.style)},[t("i",{style:{"background-color":"rgba(240, 248, 255, 0.767)"},class:"pi pi-times absolute right-0 p-1 border-round-lg on-click z-5",onClick:n[0]||(n[0]=z=>_(i(s)))}),e.imageProps.accept==="image/*"?(m(),f("img",{key:0,class:"w-full h-full object-fit-cover",src:i(s).base64,alt:"Lỗi ảnh"},null,8,de)):V("",!0),e.imageProps.accept==="video/*"?(m(),f("video",ue,[t("source",{src:i(s).base64,type:"video/mp4"},null,8,pe)])):V("",!0),e.imageProps.accept===".rar"?(m(),f("div",me,[t("div",fe,[ge,t("span",null,P((T=i(s))==null?void 0:T.name),1)])])):V("",!0)],6)):V("",!0)],2),t("small",_e,P(i(a)),1)])])}}},be={class:"p-error"},he={class:"flex flex-column gap-1"},ve={class:"ql-formats"},xe={class:"ql-bold"},ye={class:"ql-italic"},Pe={class:"ql-underline"},Se={__name:"EditorValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},class:{type:String,required:!1,default:""},editorStyle:{type:String,required:!1,default:"height: 180px"},style:{type:Object,required:!1,default:()=>{}},editorProps:{type:Object,required:!1,default:()=>({length:100,required:!0,disabled:!1})}},emits:["onChange","onInput"],setup(b,{emit:c}){const e=b,{value:s,errorMessage:a,setErrors:p,setValue:y,validate:h}=C(e.name);return(d,o)=>{const r=$("Editor"),g=W("tooltip");return m(),f("div",{class:k(["flex flex-column gap-2",e.class]),style:D(e.style)},[t("label",null,[t("span",null,P(e.label),1),x(t("span",be,"*",512),[[S,e.editorProps.required]])]),t("div",he,[u(r,{modelValue:i(s),"onUpdate:modelValue":o[0]||(o[0]=v=>B(s)?s.value=v:null),editorStyle:e.editorStyle},{toolbar:O(()=>[t("span",ve,[x(t("button",xe,null,512),[[g,"Bold",void 0,{bottom:!0}]]),x(t("button",ye,null,512),[[g,"Italic",void 0,{bottom:!0}]]),x(t("button",Pe,null,512),[[g,"Underline",void 0,{bottom:!0}]])])]),_:1},8,["modelValue","editorStyle"]),x(t("small",{class:"p-error"},P(i(a)),513),[[S,i(a)]])])],6)}}},qe={class:"p-error"},$e={class:"flex flex-column gap-1 w-full"},ke={__name:"DropdownValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},options:{type:Array,required:!1,default:""},class:{type:String,required:!1,default:""},style:{type:Object,required:!1,default:()=>{}},dropdownProps:{type:Object,required:!1,default:()=>({optionLabel:"name",optionLabel:"code",placeholder:"",class:"",required:!0,disabled:!1})}},emits:["onChange"],setup(b,{emit:c}){const e=b,{value:s,errorMessage:a,setErrors:p,setValue:y}=C(e.name);return(h,d)=>{const o=$("Dropdown");return m(),f("div",{class:k(["flex flex-column gap-2",e.class]),style:D(e.style)},[t("label",null,[t("span",null,P(e.label),1),x(t("span",qe,"*",512),[[S,e.dropdownProps.required]])]),t("div",$e,[u(o,{modelValue:i(s),"onUpdate:modelValue":d[0]||(d[0]=r=>B(s)?s.value=r:null),options:e.options,optionLabel:e.dropdownProps.optionLabel,optionValue:e.dropdownProps.optionValue,placeholder:e.dropdownProps.placeholder,class:k(e.dropdownProps.class),disabled:e.dropdownProps.disabled,onChange:d[1]||(d[1]=r=>c("onChange"))},null,8,["modelValue","options","optionLabel","optionValue","placeholder","class","disabled"]),x(t("small",{class:"p-error"},P(i(a)),513),[[S,i(a)]])])],6)}}},Ve={class:"p-error"},we={class:"flex flex-column gap-1 w-full"},Ie={__name:"InputTextValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},class:{type:String,required:!1,default:""},style:{type:Object,required:!1,default:()=>{}},inputTextProps:{type:Object,required:!1,default:()=>({maxlength:100,required:!0,disabled:!1})}},emits:["onChange","onInput"],setup(b,{emit:c}){const e=b,{value:s,errorMessage:a,setErrors:p,setValue:y,validate:h}=C(e.name);return(d,o)=>{const r=$("InputText");return m(),f("div",{class:k(["flex flex-column gap-2",e.class]),style:D(e.style)},[t("label",null,[t("span",null,P(e.label),1),x(t("span",Ve,"*",512),[[S,e.inputTextProps.required]])]),t("div",we,[u(r,{type:"text",modelValue:i(s),"onUpdate:modelValue":o[0]||(o[0]=g=>B(s)?s.value=g:null),class:"w-full",disabled:e.inputTextProps.disabled,maxlength:e.inputTextProps.maxlength,onInput:o[1]||(o[1]=g=>c("onInput")),onChange:o[2]||(o[2]=g=>c("onChange"))},null,8,["modelValue","disabled","maxlength"]),x(t("small",{class:"p-error"},P(i(a)),513),[[S,i(a)]])])],6)}}},Ce={class:"p-error"},De={class:"flex flex-column gap-1 w-full"},Te={__name:"InputNumberValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},class:{type:String,required:!1,default:""},style:{type:Object,required:!1,default:()=>{}},inputNumberProps:{type:Object,required:!1,default:()=>({length:100,required:!0,disabled:!1})}},emits:["onBlur","onChange","onInput"],setup(b,{emit:c}){const e=b,{value:s,errorMessage:a,setErrors:p,setValue:y,validate:h}=C(e.name),d=o=>{y(o==null?void 0:o.value),c("onInput")};return(o,r)=>{const g=$("InputNumber");return m(),f("div",{class:k(["flex flex-column gap-2",e.class]),style:D(e.style)},[t("label",null,[t("span",null,P(e.label),1),x(t("span",Ce,"*",512),[[S,e.inputNumberProps.required]])]),t("div",De,[u(g,{modelValue:i(s),"onUpdate:modelValue":r[0]||(r[0]=v=>B(s)?s.value=v:null),class:"w-full",disabled:e.inputNumberProps.disabled,currency:"VND",locale:"vn-VN",onInput:d,onChange:r[1]||(r[1]=v=>c("onChange"))},null,8,["modelValue","disabled"]),x(t("small",{class:"p-error"},P(i(a)),513),[[S,i(a)]])])],6)}}},Oe={class:"flex flex-column gap-3"},Re={class:"flex gap-3"},Be={class:"card"},Ee={class:"card flex flex-column gap-3"},Ae={class:"card w-full"},je={__name:"InfoProduct",setup(b){const c=N(),e=F(),s=X(),{onGetterGetProductDetail:a,onActionGetProductDetail:p,onActionSaveInfoProduct:y,onActionActiveProduct:h}=L(),d=U({id:e.params.id==="create"?null:e.params.id,formInfoProduct:{image:null,name:"",price:null,description:"",status_code:"DRAFT"}}),o=R({image:R().required("Vui lòng thêm ảnh sản phẩm"),name:A().required("Vui lòng nhập tên sản phẩm"),price:A().required("Vui lòng nhập giá sản phẩm"),description:A().required("Vui lòng nhập mô tả sản phẩm")}),{values:r,resetForm:g,handleSubmit:v}=M({initialValues:d.formInfoProduct,validationSchema:o,keepValuesOnUnmount:!0}),_=v(async()=>{y(d.id,r).then(n=>{n.success&&c.replace({name:"ProductDetailAdmin",params:{id:n.data}})})}),l=()=>{console.log(d.id),s.require({message:"Bạn muốn kích hoạt sản phẩm?",header:"Xác nhận",icon:"pi pi-info-circle",acceptLabel:"Đồng ý",rejectLabel:"Hủy bỏ",rejectClass:"p-button-outlined",accept:async()=>{h({ids:[+d.id],status:"ACTIVE"}).then(n=>{n.success&&p(d.id)})}})};return I(()=>e.params.id,n=>{d.id=n}),I(a,n=>{g({values:{...Object.assign(d.formInfoProduct,{...n})}})}),(n,q)=>{const T=$("Button"),z=$("ConfirmDialog");return m(),f(G,null,[t("div",Oe,[u(J,{onOnSave:i(_),onOnSkip:q[0]||(q[0]=E=>i(c).push({name:"ProductAdmin"}))},{default:O(()=>{var E;return[x(u(T,{label:"Kích hoạt",onClick:l},null,512),[[S,((E=i(r))==null?void 0:E.status_code)==="DRAFT"]])]}),_:1},8,["onOnSave"]),t("div",Re,[t("div",Be,[u(w,{name:"image",label:"Ảnh sản phẩm"})]),t("div",Ee,[u(Ie,{name:"name",label:"Tên sản phẩm",class:"w-17rem"}),u(Te,{name:"price",label:"Giá sản phẩm",class:"w-17rem"}),u(ke,{name:"status_code",options:[{name:"Dự thảo",code:"DRAFT"},{name:"Hoạt động",code:"ACTIVE"},{name:"Tạm ngưng",code:"PAUSE"}],label:"Trạng thái",dropdownProps:{disabled:!0,optionLabel:"name",optionValue:"code"}})]),t("div",Ae,[u(Se,{name:"description",label:"Mô tả sản phẩm"})])])]),u(z,{class:"line-height-3"})],64)}}},Fe={class:"flex align-items-center gap-2"},Le={class:"text-custom-1 font-bold"},Ue={__name:"LabelDetail",props:["name"],emits:["onEmitClickIconBack"],setup(b,{emit:c}){const e=b;return(s,a)=>(m(),f("div",Fe,[t("i",{onClick:a[0]||(a[0]=p=>c("onEmitClickIconBack")),class:"pi pi-chevron-left on-click"}),t("span",Le,P(e==null?void 0:e.name),1)]))}},ze={class:"flex flex-column gap-3"},Ne={class:"flex gap-3"},Me={class:"card flex flex-column gap-2"},Ge=t("label",null,"Ảnh con",-1),Je={class:"flex gap-3"},He={class:"card"},Ke={class:"card"},Ze={__name:"DescriptionProduct",setup(b){const c=F(),{onGetterGetProductDetail:e,onActionGetProductDetail:s,onActionSaveDescriptionProduct:a}=L(),p=U({id:c.params.id,formDescriptionProduct:{file_products_id:null,image1:null,image2:null,image3:null,video:null,file:null},deleteFiles:[]}),y=R({file:R().required("Vui lòng nhập tệp tin sản phẩm")}),{values:h,resetForm:d,handleSubmit:o}=M({initialValues:p.formDescriptionProduct,validationSchema:y,keepValuesOnUnmount:!0}),r=(_,l)=>{p.deleteFiles.push({key:_,url:l})},g=o(async()=>{a(p.id,h,p.deleteFiles).then(_=>{_.success&&(p.deleteFiles=[],s(p.id))})}),v=()=>{};return I(()=>c.params.id,_=>{p.id=_}),I(e,_=>{d({values:{...Object.assign(p.formDescriptionProduct,{..._.files})}})}),(_,l)=>(m(),f("div",ze,[u(J,{onOnSave:i(g),onOnSkip:v},null,8,["onOnSave"]),t("div",Ne,[t("div",Me,[Ge,t("div",Je,[u(w,{name:"image1",class:"w-7rem h-7rem",miniSize:!0,onOnRemove:l[0]||(l[0]=n=>r("image1",n.base64))}),u(w,{name:"image2",class:"w-7rem h-7rem",miniSize:!0,onOnRemove:l[1]||(l[1]=n=>r("image2",n.base64))}),u(w,{name:"image3",class:"w-7rem h-7rem",miniSize:!0,onOnRemove:l[2]||(l[2]=n=>r("image3",n.base64))})])]),t("div",He,[u(w,{name:"video",label:"Video sản phẩm",class:"w-17rem h-13rem",imageProps:{maxSize:500,required:!0,disabled:!1,accept:"video/*",type:"MP4"},onOnRemove:l[3]||(l[3]=n=>r("video",n.base64))})]),t("div",Ke,[u(w,{name:"file",label:"Tệp sản phẩm",class:"w-17rem h-13rem",imageProps:{maxSize:1e3,required:!0,disabled:!1,accept:".rar",type:"RAR, ZIP"},onOnRemove:l[4]||(l[4]=n=>r("file",n.base64))},null,8,["imageProps"])])])]))}},We={class:"flex flex-column gap-3"},Xe={class:"px-3"},Ye={__name:"ProductDetail",setup(b){const c=N(),e=F(),{onActionGetProductDetail:s}=L(),a=U({id:e.params.id,tabIndex:0,tabs:[{title:"Thông tin chung"},{title:"Mô tả"}]}),p=()=>a.id==="create",y=()=>{},h=()=>{c.push({name:"ProductAdmin"})};return I(()=>e.params.id,d=>{a.id=d}),Q(()=>{a.id!=="create"&&s(a.id)}),(d,o)=>{const r=$("TabPanel"),g=$("TabView");return m(),f("div",We,[u(Ue,{name:"Thông tin sản phẩm",onOnEmitClickIconBack:h}),u(g,{activeIndex:a.tabIndex,"onUpdate:activeIndex":o[0]||(o[0]=v=>a.tabIndex=v),onTabChange:y},{default:O(()=>[(m(!0),f(G,null,Y(a.tabs,(v,_)=>(m(),j(r,{key:_,header:v.title,disabled:p()&&_},{default:O(()=>[t("div",Xe,[_===0?(m(),j(je,{key:0})):V("",!0),_===1?(m(),j(Ze,{key:1})):V("",!0)])]),_:2},1032,["header","disabled"]))),128))]),_:1},8,["activeIndex"])])}}};export{Ye as default};
